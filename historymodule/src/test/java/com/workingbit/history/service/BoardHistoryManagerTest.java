package com.workingbit.history.service;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.workingbit.share.domain.IBoard;
import com.workingbit.share.domain.impl.Board;
import org.junit.Before;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertTrue;

/**
 * Created by Aleksey Popryaduhin on 16:09 13/08/2017.
 */
public class BoardHistoryManagerTest {

  ObjectMapper mapper = new ObjectMapper();

  private BoardHistoryManager historyManagerService;

  @Before
  public void setUp() {
    this.historyManagerService = BoardHistoryManager.getInstance();
  }

  @Test
  public void addChangeable() throws Exception {
    IBoard board = getBoard();
    historyManagerService.addChangeable(board.getCurrentBoard());
    boolean canUndo = historyManagerService.canUndo();
    assertTrue(canUndo);
  }

  @Test
  public void undo() throws Exception {
  }

  @Test
  public void redo() throws Exception {
  }

  IBoard getBoard() {
    try {
      return mapper.readValue("{\n" +
          "  \"black\": 0,\n" +
          "  \"currentBoard\": \"{\\\"squares\\\":[{\\\"v\\\":0,\\\"h\\\":0,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":0,\\\"h\\\":1,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":0,\\\"h\\\":1,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":0,\\\"h\\\":2,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":0,\\\"h\\\":3,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":0,\\\"h\\\":3,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":0,\\\"h\\\":4,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":0,\\\"h\\\":5,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":0,\\\"h\\\":5,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":0,\\\"h\\\":6,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":0,\\\"h\\\":7,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":0,\\\"h\\\":7,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":1,\\\"h\\\":0,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":1,\\\"h\\\":0,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":1,\\\"h\\\":1,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":1,\\\"h\\\":2,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":1,\\\"h\\\":2,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":1,\\\"h\\\":3,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":1,\\\"h\\\":4,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":1,\\\"h\\\":4,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":1,\\\"h\\\":5,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":1,\\\"h\\\":6,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":1,\\\"h\\\":6,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":1,\\\"h\\\":7,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":2,\\\"h\\\":0,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":2,\\\"h\\\":1,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":2,\\\"h\\\":1,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":2,\\\"h\\\":2,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":2,\\\"h\\\":3,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":2,\\\"h\\\":3,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":2,\\\"h\\\":4,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":2,\\\"h\\\":5,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":2,\\\"h\\\":5,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":2,\\\"h\\\":6,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":2,\\\"h\\\":7,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":2,\\\"h\\\":7,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":3,\\\"h\\\":0,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":3,\\\"h\\\":1,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":3,\\\"h\\\":2,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":3,\\\"h\\\":3,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":3,\\\"h\\\":4,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":3,\\\"h\\\":5,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":3,\\\"h\\\":6,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":3,\\\"h\\\":7,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":4,\\\"h\\\":0,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":4,\\\"h\\\":1,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":4,\\\"h\\\":2,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":4,\\\"h\\\":3,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":4,\\\"h\\\":3,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":true}},{\\\"v\\\":4,\\\"h\\\":4,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":4,\\\"h\\\":5,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":4,\\\"h\\\":6,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":4,\\\"h\\\":7,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":5,\\\"h\\\":0,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":5,\\\"h\\\":0,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":5,\\\"h\\\":1,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":5,\\\"h\\\":2,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":5,\\\"h\\\":3,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":5,\\\"h\\\":4,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":5,\\\"h\\\":4,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":5,\\\"h\\\":5,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":5,\\\"h\\\":6,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":5,\\\"h\\\":6,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":5,\\\"h\\\":7,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":6,\\\"h\\\":0,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":6,\\\"h\\\":1,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":6,\\\"h\\\":1,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":6,\\\"h\\\":2,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":6,\\\"h\\\":3,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":6,\\\"h\\\":3,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":6,\\\"h\\\":4,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":6,\\\"h\\\":5,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":6,\\\"h\\\":5,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":6,\\\"h\\\":6,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":6,\\\"h\\\":7,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":6,\\\"h\\\":7,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":7,\\\"h\\\":0,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":7,\\\"h\\\":0,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":7,\\\"h\\\":1,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":7,\\\"h\\\":2,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":7,\\\"h\\\":2,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":7,\\\"h\\\":3,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":7,\\\"h\\\":4,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":7,\\\"h\\\":4,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":7,\\\"h\\\":5,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null},{\\\"v\\\":7,\\\"h\\\":6,\\\"main\\\":true,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":{\\\"v\\\":7,\\\"h\\\":6,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}},{\\\"v\\\":7,\\\"h\\\":7,\\\"main\\\":false,\\\"highlighted\\\":false,\\\"size\\\":60,\\\"draught\\\":null}],\\\"whiteDraughts\\\":[{\\\"v\\\":5,\\\"h\\\":0,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":5,\\\"h\\\":2,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":5,\\\"h\\\":4,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":5,\\\"h\\\":6,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":6,\\\"h\\\":1,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":6,\\\"h\\\":3,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":6,\\\"h\\\":5,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":6,\\\"h\\\":7,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":7,\\\"h\\\":0,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":7,\\\"h\\\":2,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":7,\\\"h\\\":4,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":7,\\\"h\\\":6,\\\"black\\\":false,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}],\\\"blackDraughts\\\":[{\\\"v\\\":0,\\\"h\\\":1,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":0,\\\"h\\\":3,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":0,\\\"h\\\":5,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":0,\\\"h\\\":7,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":1,\\\"h\\\":0,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":1,\\\"h\\\":2,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":1,\\\"h\\\":4,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":1,\\\"h\\\":6,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":2,\\\"h\\\":1,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":2,\\\"h\\\":3,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":2,\\\"h\\\":5,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false},{\\\"v\\\":2,\\\"h\\\":7,\\\"black\\\":true,\\\"queen\\\":false,\\\"beaten\\\":false,\\\"highlighted\\\":false}],\\\"selectedDraught\\\":null}\",\n" +
          "  \"id\": \"2930219d-db68-41f8-96e4-5277186a0e38\",\n" +
          "  \"rules\": \"RUSSIAN\",\n" +
          "  \"squareSize\": 60\n" +
          "}", Board.class);
    } catch (IOException e) {
      e.printStackTrace();
    }
    return null;
  }
}